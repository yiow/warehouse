<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»“åº“ç®¡ç†ç³»ç»Ÿ - å‘˜å·¥ç•Œé¢</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/remover.css')}}">
</head>
<body>
    <header class="header">
        <div class="logo">ä»“åº“ç®¡ç†ç³»ç»Ÿ</div>
        <div class="user-info">
            <span>æ¬¢è¿æ‚¨ï¼Œ<strong id="employeeName">{{user.username}}</strong> (ä»“åº“å‘˜å·¥)</span>
            <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
        </div>
    </header>

    <div class="main-container">
        <!-- å¾…å¤„ç†é€šçŸ¥åŒºåŸŸ -->
        <div class="notification-area">
            <div class="notification-header">
                <h2 class="notification-title">å¾…å¤„ç†ä»»åŠ¡</h2>
                <span class="notification-count" id="pendingCount">3</span>
            </div>
            
            <div id="pendingNotifications">
                <!-- {# ä¿®æ”¹å¼€å§‹ - ä½¿ç”¨ Jinja2 å¾ªç¯æ¸²æŸ“å¾…å¤„ç†ä»»åŠ¡ #} -->
                {% if pending_tasks %}
                    {% for task in pending_tasks %}
                        <div class="notification-item {% if loop.index == 1 %}urgent{% endif %}" data-good-num="{{ task.Good_Num }}">
                            <div class="notification-meta">
                                <span class="notification-type type-{% if task.Type == 0 %}out{% else %}in{% endif %}">
                                    {% if task.Type == 0 %}å‡ºåº“{% else %}å…¥åº“{% endif %}
                                </span>
                                <span class="notification-time">{{ task.TIME }}</span>
                            </div>
                            <div class="notification-content">
                                <strong>{% if task.Type == 0 %}å‡ºåº“é€šçŸ¥{% else %}å…¥åº“é€šçŸ¥{% endif %}</strong>
                                <div class="product-info">
                                    <div><strong>äº§å“åç§°ï¼š</strong>{{ task.Good_Name }}</div>
                                    <div><strong>äº§å“ç¼–å·ï¼š</strong>{{ task.Good_Num }}</div>
                                    <div><strong>æ•°é‡ï¼š</strong>{{ task.Good_Quantity }}</div>
                                    <div><strong>ä»“ä½ä½ç½®ï¼š</strong>{{ task.Position_Num }}</div>
                                    <!-- {# åŸå§‹é¡µé¢ä¸­æœ‰ä¾›åº”å•†/å®¢æˆ·ä¿¡æ¯ï¼Œä½†æ•°æ®åº“ä¸­æœªæä¾›ã€‚å¦‚æœéœ€è¦ï¼Œè¯·åœ¨æ•°æ®åº“ä¸­æ·»åŠ æˆ–æ ¹æ®é€»è¾‘æ¨æ–­ #} -->
                                    {# <div><strong>{% if task.Type == 0 %}å®¢æˆ·{% else %}ä¾›åº”å•†{% endif %}ï¼š</strong>è¿™é‡Œæ˜¯å®¢æˆ·/ä¾›åº”å•†ä¿¡æ¯</div> #}
                                </div>
                            </div>
                            <button class="confirm-btn" onclick="confirmTask({{ task.Good_Num }}, '{% if task.Type == 0 %}out{% else %}in{% endif %}')">
                                ç¡®è®¤{% if task.Type == 0 %}å‡ºåº“{% else %}å…¥åº“{% endif %}å®Œæˆ
                            </button>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <span class="empty-icon">ğŸ‰</span>
                        <p>æš‚æ— å¾…å¤„ç†ä»»åŠ¡ï¼</p>
                    </div>
                {% endif %}
                <!-- {# ä¿®æ”¹ç»“æŸ #} -->
            </div>
        </div>

        <!-- å·²å®Œæˆä»»åŠ¡åŒºåŸŸ -->
        <div class="completed-section">
            <div class="notification-header">
                <h2 class="notification-title">ä»Šæ—¥å·²å®Œæˆä»»åŠ¡</h2>
                <span class="notification-count" style="background: #28a745;" id="completedCount">2</span>
            </div>
            
            <div id="completedNotifications">
                <!-- {# ä¿®æ”¹å¼€å§‹ - ä½¿ç”¨ Jinja2 å¾ªç¯æ¸²æŸ“å·²å®Œæˆä»»åŠ¡ #} -->
                {% if completed_tasks %}
                    {% for task in completed_tasks %}
                        <div class="completed-item">
                            <div class="notification-meta">
                                <span class="notification-type type-{% if task.Type == 0 %}out{% else %}in{% endif %}">
                                    {% if task.Type == 0 %}å‡ºåº“{% else %}å…¥åº“{% endif %}
                                </span>
                                <span class="notification-time">å·²å®Œæˆ - {{ task.TIME }}</span>
                            </div>
                            <div class="notification-content">
                                <strong>{% if task.Type == 0 %}å‡ºåº“ä»»åŠ¡{% else %}å…¥åº“ä»»åŠ¡{% endif %}</strong>
                                <div class="product-info">
                                    <div><strong>äº§å“åç§°ï¼š</strong>{{ task.Good_Name }}</div>
                                    <div><strong>äº§å“ç¼–å·ï¼š</strong>{{ task.Good_Num }}</div>
                                    <div><strong>æ•°é‡ï¼š</strong>{{ task.Good_Quantity }}</div>
                                    <div><strong>ä»“ä½ä½ç½®ï¼š</strong>{{ task.Position_Num }}</div>
                                    <div><strong>çŠ¶æ€ï¼š</strong><span class="status-completed">âœ“ å·²ç¡®è®¤å®Œæˆ</span></div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <span class="empty-icon">âœ¨</span>
                        <p>æš‚æ— å·²å®Œæˆä»»åŠ¡ã€‚</p>
                    </div>
                {% endif %}
                <!-- {# ä¿®æ”¹ç»“æŸ #} -->
            </div>
        </div>
    </div>

    <script src="{{url_for('static',filename='js/remover.js')}}"></script>
</body>
</html>